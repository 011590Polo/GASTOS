<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba - Datos Funcionando</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="material-design.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div style="padding: 20px; max-width: 1200px; margin: 0 auto;">
        <h1>Prueba de Datos</h1>
        
        <div style="margin: 20px 0;">
            <button onclick="cargarDatosEjemplo()" style="padding: 10px 20px; margin-right: 10px;">
                Cargar Datos de Ejemplo
            </button>
            <button onclick="limpiarDatos()" style="padding: 10px 20px; margin-right: 10px;">
                Limpiar Datos
            </button>
            <button onclick="mostrarDatosActuales()" style="padding: 10px 20px;">
                Mostrar Datos Actuales
            </button>
        </div>
        
        <div id="resultado" style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Resultado:</h3>
            <pre id="datosMostrados"></pre>
        </div>
        
        <div id="tablaGastos" style="margin: 20px 0;">
            <h3>Tabla de Gastos:</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #e0e0e0;">
                        <th style="padding: 10px; border: 1px solid #ccc;">NIC</th>
                        <th style="padding: 10px; border: 1px solid #ccc;">Nombre</th>
                        <th style="padding: 10px; border: 1px solid #ccc;">Deuda</th>
                        <th style="padding: 10px; border: 1px solid #ccc;">Día de Pago</th>
                        <th style="padding: 10px; border: 1px solid #ccc;">Estado</th>
                    </tr>
                </thead>
                <tbody id="tabla_gastos">
                    <!-- Se llenará dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Funciones básicas para la prueba
        function obtenerGastos() {
            return JSON.parse(localStorage.getItem("gastos") || "[]");
        }
        
        function guardarGastos(gastos) {
            localStorage.setItem("gastos", JSON.stringify(gastos));
        }
        
        function cargarDatosEjemplo() {
            const datosEjemplo = [
                {
                    id: 1,
                    nic: "NIC-001",
                    nombre: "Internet Hogar",
                    deuda: 89900,
                    dia_pago: 15,
                    enlace_pago: "https://www.claro.com.co/pagos",
                    estado: "puede esperar",
                    fechaCreacion: new Date().toISOString()
                },
                {
                    id: 2,
                    nic: "NIC-002", 
                    nombre: "Servicio de Luz",
                    deuda: 156200,
                    dia_pago: 10,
                    enlace_pago: "https://www.epm.com.co/pagos",
                    estado: "urgente",
                    fechaCreacion: new Date().toISOString()
                },
                {
                    id: 3,
                    nic: "NIC-003",
                    nombre: "Agua y Alcantarillado",
                    deuda: 45600,
                    dia_pago: 20,
                    enlace_pago: "https://www.aaa.com.co/pagos",
                    estado: "puede esperar",
                    fechaCreacion: new Date().toISOString()
                }
            ];
            
            guardarGastos(datosEjemplo);
            mostrarDatosActuales();
            mostrarGastos();
            alert('Datos de ejemplo cargados');
        }
        
        function limpiarDatos() {
            localStorage.removeItem('gastos');
            mostrarDatosActuales();
            mostrarGastos();
            alert('Datos limpiados');
        }
        
        function mostrarDatosActuales() {
            const gastos = obtenerGastos();
            document.getElementById('datosMostrados').textContent = JSON.stringify(gastos, null, 2);
        }
        
        function mostrarGastos() {
            const gastos = obtenerGastos();
            const tbody = document.getElementById("tabla_gastos");
            tbody.innerHTML = "";
            
            gastos.forEach(g => {
                const fila = document.createElement("tr");
                fila.innerHTML = `
                    <td style="padding: 10px; border: 1px solid #ccc;">${g.nic}</td>
                    <td style="padding: 10px; border: 1px solid #ccc;">${g.nombre}</td>
                    <td style="padding: 10px; border: 1px solid #ccc;">${g.deuda.toLocaleString("es-CO", { style: "currency", currency: "COP" })}</td>
                    <td style="padding: 10px; border: 1px solid #ccc;">${g.dia_pago ? `Día ${g.dia_pago}` : 'No definido'}</td>
                    <td style="padding: 10px; border: 1px solid #ccc;">${g.estado}</td>
                `;
                tbody.appendChild(fila);
            });
        }
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            mostrarDatosActuales();
            mostrarGastos();
        });
    </script>
</body>
</html>
