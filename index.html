<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrador de Gastos</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Aplicaci√≥n para gestionar y controlar gastos personales">
    <meta name="theme-color" content="#1976d2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Gastos">
    <meta name="msapplication-TileColor" content="#1976d2">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="./icons/icon-167x167.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icons/icon-16x16.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="material-design.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Material Design Web Components (removido por problemas de CORS) -->
    <!-- <script src="https://unpkg.com/@material/web@1.0.0/material-web.js" type="module"></script> -->
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Men√∫ de navegaci√≥n lateral -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <i class="material-icons">account_balance_wallet</i>
                <span>Gastos</span>
            </div>
            <button class="sidebar-toggle" onclick="toggleSidebar()" title="Cerrar men√∫">
                <i class="material-icons">close</i>
            </button>
        </div>
        
        <div class="sidebar-content">
            <ul class="sidebar-menu">
                <li class="menu-item active" data-section="dashboard">
                    <a href="#dashboard" onclick="mostrarSeccion('dashboard')">
                        <i class="material-icons">dashboard</i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="menu-item" data-section="gastos">
                    <a href="#gastos" onclick="mostrarSeccion('gastos')">
                        <i class="material-icons">receipt_long</i>
                        <span>Gastos</span>
                    </a>
                </li>
                <li class="menu-item" data-section="estadisticas">
                    <a href="#estadisticas" onclick="mostrarSeccion('estadisticas')">
                        <i class="material-icons">analytics</i>
                        <span>Estad√≠sticas</span>
                    </a>
                </li>
                <li class="menu-item" data-section="resultados">
                    <a href="#resultados" onclick="mostrarSeccion('resultados')">
                        <i class="material-icons">assessment</i>
                        <span>Resultados y Acciones</span>
                    </a>
                </li>
                <li class="menu-item" data-section="configuracion">
                    <a href="#configuracion" onclick="mostrarSeccion('configuracion')">
                        <i class="material-icons">settings</i>
                        <span>Configuraci√≥n</span>
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-divider"></div>
            
            <ul class="sidebar-menu">
                <li class="menu-item" data-section="ayuda">
                    <a href="#ayuda" onclick="mostrarSeccion('ayuda')">
                        <i class="material-icons">help</i>
                        <span>Ayuda</span>
                    </a>
                </li>
                <li class="menu-item" data-section="acerca">
                    <a href="#acerca" onclick="mostrarSeccion('acerca')">
                        <i class="material-icons">info</i>
                        <span>Acerca de</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Overlay para cerrar el men√∫ en m√≥viles -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Contenido principal -->
    <main class="main-content" id="mainContent">
        <!-- Header principal -->
        <header class="main-header">
            <div class="header-left">
                <button class="menu-toggle" onclick="toggleSidebar()" title="Abrir men√∫">
                    <i class="material-icons">menu</i>
                </button>
                <button class="sidebar-toggle-desktop" onclick="toggleSidebar()" title="Alternar men√∫">
                    <i class="material-icons">menu</i>
                </button>
            </div>
            <h1 class="page-title" id="pageTitle">Dashboard</h1>
            <div class="header-actions">
                <!-- Bot√≥n Agregar eliminado -->
            </div>
        </header>

        <!-- Secci√≥n Dashboard -->
        <section id="dashboard" class="content-section active">
            <div class="dashboard-grid">
                <!-- Tarjetas de resumen r√°pido -->
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">receipt_long</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="totalGastosDashboard">0</h4>
                            <p>Total Gastos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">pending</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="gastosPendientesDashboard">0</h4>
                            <p>Pendientes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">check_circle</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="gastosPagadosDashboard">0</h4>
                            <p>Pagados</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">warning</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="gastosUrgentesDashboard">0</h4>
                            <p>Urgentes</p>
                        </div>
                    </div>
                </div>

                <!-- Acciones r√°pidas -->
                <div class="quick-actions">
                    <h3><i class="material-icons">flash_on</i> Acciones R√°pidas</h3>
                    <div class="actions-grid">
                        <button class="action-card" onclick="abrirModalAgregarGasto()">
                            <i class="material-icons">add_circle</i>
                            <span>Agregar Gasto</span>
                        </button>
                        <button class="action-card" onclick="mostrarSeccion('estadisticas')">
                            <i class="material-icons">analytics</i>
                            <span>Ver Estad√≠sticas</span>
                        </button>
                        <button class="action-card" onclick="exportarJSON()">
                            <i class="material-icons">file_download</i>
                            <span>Exportar Datos</span>
                        </button>
                        <button class="action-card" onclick="importarJSON()">
                            <i class="material-icons">file_upload</i>
                            <span>Importar Datos</span>
                        </button>
                    </div>
                </div>

                <!-- √öltimos pagos realizados -->
                <div class="recent-gastos">
                    <h3><i class="material-icons">payment</i> √öltimos Pagos Realizados</h3>
                    <div class="recent-list" id="recentGastosList">
                        <!-- Se llenar√° din√°micamente -->
                    </div>
                </div>

                <!-- Gr√°ficos del dashboard -->
                <div class="charts-container">
                    <div class="chart-card">
                        <h4><i class="material-icons">pie_chart</i> Distribuci√≥n por Estado</h4>
                        <canvas id="chartEstadosDashboard" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <h4><i class="material-icons">bar_chart</i> Gastos por Categor√≠a</h4>
                        <canvas id="chartCategoriasDashboard" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <h4><i class="material-icons">trending_up</i> Pagos Mensuales</h4>
                        <canvas id="chartPagosMensualesDashboard" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Gastos -->
        <section id="gastos" class="content-section">
            <!-- Tarjeta de filtros -->
            <div class="filters-card">
                <div class="filters-header">
                    <h3><i class="material-icons">filter_list</i> Filtros de B√∫squeda</h3>
                </div>
                <div class="filters-content">
                    <div class="filter-group">
                        <div class="search-box">
                            <i class="material-icons">search</i>
                            <input type="text" id="filtroBusqueda" placeholder="Buscar gastos..." oninput="filtrarGastos()">
                            <button onclick="limpiarFiltro()" class="btn-limpiar" title="Limpiar filtro">
                                <i class="material-icons">clear</i>
                            </button>
                        </div>
                    </div>
                    <div class="filter-group">
                        <select id="filtroEstado" onchange="filtrarGastos()">
                            <option value="">Todos los estados</option>
                            <option value="puede esperar">Puede Esperar</option>
                            <option value="urgente">Urgente</option>
                            <option value="pagado">Pagado</option>
                        </select>
                    </div>
                </div>
            </div>



            <!-- Tarjeta de la tabla de gastos -->
            <div class="table-card">
                <div class="table-header">
                    <h3><i class="material-icons">table_chart</i> Tabla de Gastos</h3>
                </div>
                <div class="table-content">
                    <table>
                        <thead>
                            <tr>
                                <th>NIC</th>
                                <th>Nombre</th>
                                <th>Deuda</th>
                                <th>D√≠a de Pago</th>
                                <th>Estado</th>
                                <th>Enlace</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tabla_gastos"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Estad√≠sticas -->
        <section id="estadisticas" class="content-section">
            <div class="stats-header">
                <h3><i class="material-icons">analytics</i> Estad√≠sticas Detalladas</h3>
                <button onclick="actualizarEstadisticas()" class="md-button md-button--primary md-ripple">
                    <i class="material-icons">refresh</i> Actualizar
                </button>
            </div>
            
            <div class="stats-content" id="statsContent">
                <!-- Tarjetas de estad√≠sticas generales -->
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">receipt_long</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="totalGastos">0</h4>
                            <p>Total Gastos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">pending</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="gastosPendientes">0</h4>
                            <p>Pendientes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">check_circle</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="gastosPagados">0</h4>
                            <p>Pagados</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="material-icons">warning</i>
                        </div>
                        <div class="stat-info">
                            <h4 id="gastosUrgentes">0</h4>
                            <p>Urgentes</p>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos -->
                <div class="charts-container">
                    <div class="chart-card">
                        <h4><i class="material-icons">pie_chart</i> Distribuci√≥n por Estado</h4>
                        <canvas id="chartEstados" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <h4><i class="material-icons">bar_chart</i> Gastos por Categor√≠a</h4>
                        <canvas id="chartCategorias" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <h4><i class="material-icons">trending_up</i> Pagos por Mes</h4>
                        <canvas id="chartPagosMensuales" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <h4><i class="material-icons">account_balance_wallet</i> Resumen Financiero</h4>
                        <div class="financial-summary">
                            <div class="summary-item">
                                <span>Total Deudas:</span>
                                <span id="totalDeudas" class="amount">$0</span>
                            </div>
                            <div class="summary-item">
                                <span>Total Pagado:</span>
                                <span id="totalPagado" class="amount">$0</span>
                            </div>
                            <div class="summary-item">
                                <span>Pendiente por Pagar:</span>
                                <span id="pendientePagar" class="amount">$0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bot√≥n de emergencia para detener gr√°ficos -->
                <div class="emergency-controls" style="text-align: center; margin-top: 20px;">
                    <button onclick="limpiarGraficos()" class="md-button md-button--danger md-ripple" style="background: #f44336; color: white;">
                        <i class="material-icons">stop</i> Detener Gr√°ficos (Emergencia)
                    </button>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Resultados y Acciones -->
        <section id="resultados" class="content-section">
            <div class="results-header">
                <h3><i class="material-icons">assessment</i> Resultados y Acciones</h3>
                <p>Gestiona los resultados de tus filtros y realiza acciones masivas</p>
            </div>
            
            <div class="results-content">
                <!-- Tarjeta de resultados de filtros -->
                <div class="results-card">
                    <div class="results-card-header">
                        <h4><i class="material-icons">filter_list</i> Resultados de Filtros</h4>
                    </div>
                    <div class="results-card-content">
                        <div class="filter-results">
                            <div class="results-left">
                                <span id="resultadosFiltro">Mostrando todos los gastos</span>
                            </div>
                            <div class="results-right">
                                <button onclick="limpiarFiltro()" class="md-button md-button--secondary md-ripple">
                                    <i class="material-icons">clear</i> Limpiar Filtros
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta de acciones masivas -->
                <div class="actions-card">
                    <div class="actions-card-header">
                        <h4><i class="material-icons">batch_prediction</i> Acciones Masivas</h4>
                    </div>
                    <div class="actions-card-content">
                        <div class="actions-grid">
                            <div class="action-item">
                                <h5><i class="material-icons">warning</i> Gastos Urgentes</h5>
                                <p>Gastos que vencen en los pr√≥ximos 3 d√≠as</p>
                                <button onclick="filtrarUrgentes()" class="md-button md-button--warning md-ripple">
                                    <i class="material-icons">visibility</i> Ver Urgentes
                                </button>
                            </div>
                            
                            <div class="action-item">
                                <h5><i class="material-icons">schedule</i> Pr√≥ximos Vencimientos</h5>
                                <p>Gastos que vencen en los pr√≥ximos 7 d√≠as</p>
                                <button onclick="filtrarProximos()" class="md-button md-button--info md-ripple">
                                    <i class="material-icons">schedule</i> Ver Pr√≥ximos
                                </button>
                            </div>
                            
                            <div class="action-item">
                                <h5><i class="material-icons">check_circle</i> Gastos Pagados</h5>
                                <p>Gastos que ya han sido pagados</p>
                                <button onclick="filtrarPagados()" class="md-button md-button--success md-ripple">
                                    <i class="material-icons">check_circle</i> Ver Pagados
                                </button>
                            </div>
                            
                            <div class="action-item">
                                <h5><i class="material-icons">pending</i> Gastos Pendientes</h5>
                                <p>Gastos que a√∫n no han sido pagados</p>
                                <button onclick="filtrarPendientes()" class="md-button md-button--primary md-ripple">
                                    <i class="material-icons">pending</i> Ver Pendientes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta de importaci√≥n/exportaci√≥n -->
                <div class="data-card">
                    <div class="data-card-header">
                        <h4><i class="material-icons">backup</i> Gesti√≥n de Datos</h4>
                    </div>
                    <div class="data-card-content">
                        <div class="data-actions">
                            <div class="data-action">
                                <h5><i class="material-icons">file_upload</i> Importar Datos</h5>
                                <p>Restaurar datos desde un archivo JSON</p>
                                <button onclick="importarJSON()" class="md-button md-button--primary md-ripple">
                                    <i class="material-icons">file_upload</i> Importar JSON
                                </button>
                            </div>
                            
                            <div class="data-action">
                                <h5><i class="material-icons">file_download</i> Exportar Datos</h5>
                                <p>Descargar todos los datos como archivo JSON</p>
                                <button onclick="exportarJSON()" class="md-button md-button--success md-ripple">
                                    <i class="material-icons">file_download</i> Exportar JSON
                                </button>
                            </div>
                            
                            <div class="data-action">
                                <h5><i class="material-icons">delete_forever</i> Limpiar Datos</h5>
                                <p>Eliminar todos los datos de la aplicaci√≥n</p>
                                <button onclick="limpiarDatos()" class="md-button md-button--danger md-ripple">
                                    <i class="material-icons">delete_forever</i> Limpiar Datos
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tarjeta de estad√≠sticas r√°pidas -->
                <div class="quick-stats-card">
                    <div class="quick-stats-header">
                        <h4><i class="material-icons">insights</i> Estad√≠sticas R√°pidas</h4>
                    </div>
                    <div class="quick-stats-content">
                        <div class="quick-stats-grid">
                            <div class="quick-stat">
                                <div class="quick-stat-icon">
                                    <i class="material-icons">receipt_long</i>
                                </div>
                                <div class="quick-stat-info">
                                    <span class="quick-stat-number" id="quickTotalGastos">0</span>
                                    <span class="quick-stat-label">Total Gastos</span>
                                </div>
                            </div>
                            
                            <div class="quick-stat">
                                <div class="quick-stat-icon">
                                    <i class="material-icons">pending</i>
                                </div>
                                <div class="quick-stat-info">
                                    <span class="quick-stat-number" id="quickPendientes">0</span>
                                    <span class="quick-stat-label">Pendientes</span>
                                </div>
                            </div>
                            
                            <div class="quick-stat">
                                <div class="quick-stat-icon">
                                    <i class="material-icons">warning</i>
                                </div>
                                <div class="quick-stat-info">
                                    <span class="quick-stat-number" id="quickUrgentes">0</span>
                                    <span class="quick-stat-label">Urgentes</span>
                                </div>
                            </div>
                            
                            <div class="quick-stat">
                                <div class="quick-stat-icon">
                                    <i class="material-icons">check_circle</i>
                                </div>
                                <div class="quick-stat-info">
                                    <span class="quick-stat-number" id="quickPagados">0</span>
                                    <span class="quick-stat-label">Pagados</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Configuraci√≥n -->
        <section id="configuracion" class="content-section">
            <div class="config-card">
                <h3><i class="material-icons">settings</i> Configuraci√≥n de la Aplicaci√≥n</h3>
                <div class="config-content">
                    <div class="config-section">
                        <h4><i class="material-icons">palette</i> Apariencia</h4>
                        <div class="config-item">
                            <label>Tema:</label>
                            <select id="themeSelect" onchange="cambiarTema()">
                                <option value="light">Claro</option>
                                <option value="dark">Oscuro</option>
                                <option value="auto">Autom√°tico</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label>Color principal:</label>
                            <input type="color" id="primaryColor" value="#1976d2" onchange="cambiarColorPrincipal()">
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h4><i class="material-icons">notifications</i> Notificaciones</h4>
                        <div class="config-item">
                            <label>
                                <input type="checkbox" id="notifUrgentes" checked>
                                Recordatorios de gastos urgentes
                            </label>
                        </div>
                        <div class="config-item">
                            <label>
                                <input type="checkbox" id="notifVencidos" checked>
                                Alertas de pagos vencidos
                            </label>
                        </div>
                    </div>
                    
                    <div class="config-section">
                        <h4><i class="material-icons">backup</i> Datos</h4>
                        <div class="config-item">
                            <button onclick="exportarJSON()" class="md-button md-button--primary md-ripple">
                                <i class="material-icons">file_download</i> Exportar Datos
                            </button>
                        </div>
                        <div class="config-item">
                            <button onclick="importarJSON()" class="md-button md-button--success md-ripple">
                                <i class="material-icons">file_upload</i> Importar Datos
                            </button>
                        </div>
                        <div class="config-item">
                            <button onclick="limpiarDatos()" class="md-button md-button--danger md-ripple">
                                <i class="material-icons">delete_forever</i> Limpiar Todos los Datos
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Ayuda -->
        <section id="ayuda" class="content-section">
            <div class="help-card">
                <h3><i class="material-icons">help</i> Centro de Ayuda</h3>
                <div class="help-content">
                    <div class="help-section">
                        <h4><i class="material-icons">add_circle</i> ¬øC√≥mo agregar un gasto?</h4>
                        <ol>
                            <li>Haz clic en el bot√≥n "+" flotante o en "Agregar Gasto"</li>
                            <li>Completa la informaci√≥n requerida (NIC, Nombre, Deuda, Fecha)</li>
                            <li>Opcionalmente agrega un enlace de pago</li>
                            <li>Haz clic en "Guardar"</li>
                        </ol>
                    </div>
                    
                    <div class="help-section">
                        <h4><i class="material-icons">payment</i> ¬øC√≥mo registrar un pago?</h4>
                        <ol>
                            <li>Encuentra el gasto en la tabla</li>
                            <li>Haz clic en "Registrar Pago"</li>
                            <li>Completa la informaci√≥n del pago</li>
                            <li>Guarda el registro</li>
                        </ol>
                    </div>
                    
                    <div class="help-section">
                        <h4><i class="material-icons">filter_list</i> ¬øC√≥mo usar los filtros?</h4>
                        <ul>
                            <li><strong>B√∫squeda:</strong> Escribe en la barra de b√∫squeda para encontrar gastos espec√≠ficos</li>
                            <li><strong>Estado:</strong> Selecciona un estado para filtrar por "Puede Esperar", "Urgente" o "Pagado"</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h4><i class="material-icons">backup</i> ¬øC√≥mo respaldar mis datos?</h4>
                        <p>Usa la funci√≥n "Exportar JSON" para descargar una copia de todos tus datos. Para restaurar, usa "Importar JSON".</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Acerca de -->
        <section id="acerca" class="content-section">
            <div class="about-card">
                <h3><i class="material-icons">info</i> Acerca de la Aplicaci√≥n</h3>
                <div class="about-content">
                    <div class="app-info">
                        <h4>Administrador de Gastos</h4>
                        <p>Versi√≥n 2.0</p>
                        <p>Una aplicaci√≥n web moderna para gestionar tus deudas y pagos de manera organizada y eficiente.</p>
                    </div>
                    
                    <div class="features-list">
                        <h4>Caracter√≠sticas principales:</h4>
                        <ul>
                            <li>‚úÖ Gesti√≥n completa de gastos</li>
                            <li>üí≥ Seguimiento de pagos</li>
                            <li>üîç Filtros inteligentes</li>
                            <li>üìä Estad√≠sticas detalladas</li>
                            <li>üíæ Importar/Exportar datos</li>
                            <li>üì± Dise√±o responsive</li>
                            <li>üé® Material Design</li>
                        </ul>
                    </div>
                    
                    <div class="tech-info">
                        <h4>Tecnolog√≠as utilizadas:</h4>
                        <ul>
                            <li>HTML5, CSS3, JavaScript ES6+</li>
                            <li>Material Design</li>
                            <li>Chart.js para gr√°ficos</li>
                            <li>LocalStorage para datos</li>
                        </ul>
                    </div>
                    
                    <div class="contact-info">
                        <h4>Desarrollador:</h4>
                        <p>011590Polo</p>
                        <p>GitHub: <a href="https://github.com/011590Polo/GASTOS.git" target="_blank">github.com/011590Polo/GASTOS</a></p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal para agregar gasto -->
    <div id="modalAgregarGasto" class="modal">
        <div class="modal-contenido">
            <div class="modal-header">
                <h3>Agregar Gasto / Categor√≠a</h3>
            </div>
            <form class="form-horizontal" onsubmit="event.preventDefault(); crearGasto();">
                <div class="form-row">
                    <div class="form-group">
                        <label for="nic">NIC:</label>
                        <input type="text" id="nic" placeholder="N√∫mero de Identificaci√≥n del Cliente" required>
                    </div>
                    <div class="form-group">
                        <label for="nombre">Nombre:</label>
                        <input type="text" id="nombre" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="deuda">Deuda (COP):</label>
                        <input type="number" id="deuda" required>
                    </div>
                    <div class="form-group">
                        <label for="dia_pago">D√≠a de pago:</label>
                        <input type="number" id="dia_pago" min="1" max="31" placeholder="Ej: 15">
                        <small style="color: #666; font-size: 0.8rem;">D√≠a del mes en que se debe pagar (1-31)</small>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="enlace_pago">Enlace de pago:</label>
                        <input type="url" id="enlace_pago" placeholder="https://...">
                    </div>
                </div>
                <div class="modal-botones">
                    <button type="submit" id="btnGuardar" class="btn-registrar">
                        <i class="material-icons">save</i> Guardar
                    </button>
                    <button type="button" onclick="cerrarModalAgregarGasto()" class="btn-cancelar">
                        <i class="material-icons">close</i> Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para registrar pago -->
    <div id="modalPago" class="modal">
        <div class="modal-contenido">
            <h3>Registrar Pago</h3>
            <div class="info-gasto">
                <p>Gasto: <span id="modalNombreGasto"></span></p>
                <p>Monto: <span id="modalMontoGasto"></span></p>
                <p>Fecha a pagar: <span id="modalFechaPagar"></span></p>
            </div>
            <div class="form-pago">
                <div class="form-row">
                    <div class="form-group">
                        <label>Fecha de pago:</label>
                        <input type="date" id="modalFechaPago">
                    </div>
                    <div class="form-group">
                        <label>Valor pagado (COP):</label>
                        <input type="number" id="modalValorPagado" placeholder="Ingrese el valor real pagado">
                    </div>
                </div>
                
                <div class="diferencia-valor" id="diferenciaPago"></div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Comprobante de pago (opcional):</label>
                        <input type="text" id="modalComprobante" placeholder="N√∫mero de comprobante o referencia">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Notas adicionales:</label>
                    <textarea id="modalNotas" rows="3"></textarea>
                </div>
                
                <div class="modal-botones">
                    <button onclick="registrarPago()" class="btn-registrar">Registrar Pago</button>
                    <button onclick="cerrarModal()" class="btn-cancelar">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para historial de pagos -->
    <div id="modalHistorial" class="modal">
        <div class="modal-contenido">
            <h3>Historial de Pagos</h3>
            <div class="info-gasto">
                <p>Gasto: <span id="historialNombreGasto"></span></p>
                <p>Valor Original: <span id="historialValorOriginal"></span></p>
                <p>Estado: <span id="historialEstado"></span></p>
            </div>
            <div class="tabla-historial">
                <table>
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Valor Pagado</th>
                            <th>Diferencia</th>
                            <th>Comprobante</th>
                            <th>Notas</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="listaPagos"></tbody>
                </table>
            </div>
            <div class="total-pagado" id="historialTotalPagado"></div>
            <div class="modal-botones">
                <button onclick="cerrarModalHistorial()" class="btn-cancelar">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n para eliminar -->
    <div id="modalConfirmacion" class="modal">
        <div class="modal-contenido modal-confirmacion">
            <div class="confirmacion-header">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Confirmar Eliminaci√≥n</h3>
            </div>
            <div class="confirmacion-body">
                <p>¬øEst√°s seguro de que deseas eliminar este elemento?</p>
                <div id="detallesEliminacion"></div>
            </div>
            <div class="modal-botones">
                <button onclick="confirmarEliminacion()" class="button button-danger">
                    <i class="fas fa-trash"></i> S√≠, Eliminar
                </button>
                <button onclick="cerrarModalConfirmacion()" class="button">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Input oculto para importar JSON -->
    <input type="file" id="importarArchivo" accept=".json" style="display: none;" onchange="procesarArchivoImportado(event)">

    <!-- Snackbar para notificaciones -->
    <div id="snackbar" class="md-snackbar">
        <span id="snackbar-text"></span>
    </div>

    <script src="script.js"></script>
    <script src="pwa-error-handler.js"></script>
    <script src="pwa.js"></script>
    <script src="notifications.js"></script>
</body>
</html>